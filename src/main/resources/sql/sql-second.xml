<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.second.group.mapper.SecondMapper">

	<select id="selectSecondHomeList" resultType="com.second.group.dto.SecondRecipeDto">
		<![CDATA[
			SELECT 
				idx, title,
			DATE_FORMAT
				(created_datetime, '%Y.%m.%d') 
			AS 
				created_datetime
			FROM 
				recipe
			WHERE
			    idx
		]]>
	</select>
	
	<select id="selectCommentHomeList" resultType="com.second.group.dto.SecondCommentDto">
		<![CDATA[ 
		SELECT 
			cmtidx, cmt_content, 
		DATE_FORMAT
			(cmt_datetime, '%Y.%m.%d') 
		AS 
			cmt_datetime
		FROM 
			comment
		WHERE
			cmtidx
		
		]]>
	</select>
	
	<select id="selectSecondList" resultType="com.second.group.dto.SecondRecipeDto">
		<![CDATA[
			SELECT
				idx, created_datetime, title, recommend
			FROM
			    recipe
			WHERE
			    recipe_deleted_yn = 'N'
			ORDER BY idx DESC
		]]>
	</select>
	
	<select id="selectRecipeDetail" parameterType="int" resultType="com.second.group.dto.SecondRecipeDto">
		<![CDATA[
			SELECT
				idx,
				title,
				ingredient,
				DATE_FORMAT(created_datetime, '%Y.%m.%d %H:%i') AS created_datetime,
				cook_comment,
				cook_point,
				cook_time
			FROM
				recipe
			WHERE
				idx = #{idx}
		]]>
	</select>
	
	<insert id="insertRecipe" parameterType="com.second.group.dto.SecondRecipeDto">
		<![CDATA[ 
			INSERT INTO recipe
			
				(title, ingredient, cook_comment, cook_point, cook_time, created_datetime)
				
			VALUES
    			(#{title}, #{ingredient}, #{cookComment}, #{cookPoint}, #{cookTime}, NOW());
		]]>
	</insert>
	
</mapper>